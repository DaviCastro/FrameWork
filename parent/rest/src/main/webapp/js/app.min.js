var App = Ember.Application.create({
	LOG_TRANSITIONS: true,
    LOG_BINDINGS: true,
    LOG_VIEW_LOOKUPS: true,
    LOG_STACKTRACE_ON_DEPRECATION: true,
    LOG_VERSION: true,
    debugMode: true
    
});
App.Router.map(function(){
	this.resource('albums',function(){
		this.resource('album',{ path: ':id' },function(){
			this.route('edit');
		});
	});
});


App.ApplicationAdapter = DS.RESTAdapter.extend({
	namespace: 'rest/rest'
});
App.Album = DS.Model.extend({
	nome: DS.attr('string'),
	descricao: DS.attr('string')
});
App.AlbumEditRoute = Ember.Route.extend({
	model:function(){
		return this.modelFor("album");
	}
});
App.AlbumRoute = Ember.Route.extend({
	model:function(params){
			return this.store.find('album',params.id);
	}
});
App.AlbumsRoute = Ember.Route.extend({
	model : function() {
		return this.store.find("album");		
	}
});
App.AlbumController = Ember.ObjectController.extend({

	actions : {
			edit:function(){
				this.transitionToRoute('album.edit'); 
			}
	}
});
App.AlbumEditController = Ember.ObjectController.extend({
	actions:{
		salvar:function(){
			var album = this.get("model");
				album.save();
				this.transitionToRoute('album',album);
		}
	}
	
});
App.AlbumsController = Ember.ArrayController.extend({
sortProperties:['nome'],
sortAscending:true,

albumContador:function(){
	return this.get('model.length');
}.property('@each')

});